import React, { FC } from "react";
import styles from "./team-member-card.module.css";
import clsx from "clsx";
import { Link } from "react-router-dom";
import { ITeamMemberCardUIProps } from "./type";

export const TeamMemberCardUI: FC<ITeamMemberCardUIProps> = ({
  id,
  name,
  email,
  photo,
  articles,
  color,
  tasks,
}) => {
  const visibleArticles = articles?.slice(0, 3) ?? [];
  const hiddenArticles = articles?.slice(3) ?? [];
  const colorVar = `var(--${color})`;

  return (
    <div
      className={styles.memberContainer}
      style={{ boxShadow: `0 0 20px ${colorVar}` }}
    >
      <div className={styles.memberAvatarContainer}>
        {photo ? (
          <img
            src={require(`../../../assets/images/team/${photo}`)}
            loading="lazy"
            alt={name}
            className={styles.memberProfilePicture}
          />
        ) : (
          <svg
            className={styles.icon}
            viewBox="0 0 300 300"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            preserveAspectRatio="none"
          >
            <path
              style={{ fill: colorVar }}
              d="M0 300H0V0H300V300ZM212.721 66.4102C203.217 61.9617 193.247 63.0954 187.808 64.7871C175.501 68.6147 169.895 74.6328 167.575 81.2334C166.444 84.453 166.141 87.6835 166.103 90.6211C166.083 92.0897 166.131 93.5082 166.18 94.8154C166.229 96.141 166.278 97.3279 166.272 98.4189C166.235 105.768 166.566 111.289 166.05 118.396C166.039 118.546 166.026 119.133 166.008 119.73C162.085 113.051 155.737 102.944 147.793 94.5967C138.133 84.4465 125.414 76.1947 111.479 81.2734C106.666 82.7873 102.261 86.4085 98.9688 90.6963C95.6565 95.0107 93.297 100.225 92.8164 105.124C91.5978 117.548 94.7117 129.961 101.677 140.533C111.266 155.089 122.503 169.83 136.363 180.687C146.246 188.428 156.782 195.486 166.882 202.683C152.522 211.048 120.868 227.253 89.0713 243.568C53.8831 261.624 18.5035 279.826 6.91895 287.383C5.994 287.986 5.73347 289.225 6.33691 290.15C6.94035 291.075 8.17942 291.337 9.10449 290.733C20.4624 283.324 55.5649 265.257 90.8975 247.127C123.724 230.283 156.737 213.389 170.481 205.204C181.83 213.051 193.489 220.181 203.897 229.031C207.962 232.487 225.429 247.268 242.95 261.497C251.709 268.61 260.497 275.599 267.636 280.968C271.203 283.651 274.379 285.944 276.943 287.651C278.225 288.505 279.373 289.224 280.354 289.777C281.303 290.312 282.209 290.757 282.974 290.979C284.034 291.286 285.144 290.676 285.452 289.615C285.76 288.554 285.149 287.444 284.088 287.137C283.788 287.05 283.213 286.797 282.318 286.293C281.456 285.807 280.397 285.146 279.16 284.322C276.688 282.676 273.582 280.434 270.04 277.771C262.96 272.446 254.218 265.495 245.472 258.393C227.984 244.191 210.543 229.432 206.488 225.984C196.409 217.414 184.911 210.238 174.19 202.9C183.3 196.94 190.917 189.489 198.581 181.976C206.629 174.087 213.505 165.735 219.366 156.051C222.144 151.461 225.82 146.105 228.819 140.714C231.859 135.25 234.444 129.361 235.159 123.254C235.976 116.284 235.675 109.045 234.52 102.162L234.277 100.791C231.091 80.9709 222.36 70.9221 212.721 66.4102ZM188.995 68.6064C193.798 67.1129 202.684 66.1292 211.024 70.0332C219.222 73.8703 227.318 82.6312 230.336 101.473L230.34 101.497L230.345 101.521C231.634 108.464 232.005 115.798 231.187 122.788C230.561 128.128 228.267 133.477 225.323 138.77C222.339 144.134 218.926 149.052 215.944 153.979C210.281 163.336 203.626 171.429 195.781 179.119C187.78 186.963 180.167 194.393 171.005 200.197C170.883 200.275 170.756 200.351 170.629 200.431C170.153 200.096 169.677 199.763 169.205 199.427C158.977 192.139 148.619 185.206 138.83 177.538C125.484 167.084 114.53 152.774 105.017 138.333C98.5462 128.511 95.6703 117.01 96.7979 105.515C97.1888 101.529 99.1681 97.005 102.142 93.1318C105.119 89.254 108.918 86.2532 112.735 85.0703L112.783 85.0557L112.83 85.0391C124.339 80.8339 135.414 87.3909 144.896 97.3535C154.279 107.213 161.415 119.722 164.838 125.702C164.975 125.942 165.164 126.227 165.422 126.481C165.668 126.724 166.138 127.093 166.827 127.169C167.595 127.253 168.204 126.931 168.576 126.596C168.908 126.296 169.098 125.954 169.203 125.735C169.417 125.29 169.539 124.782 169.619 124.371C169.705 123.928 169.77 123.441 169.819 122.961C169.918 122 169.969 120.959 169.998 120.146C170.013 119.737 170.022 119.377 170.028 119.107C170.032 118.971 170.034 118.863 170.036 118.78C170.039 118.681 170.04 118.666 170.039 118.686C170.568 111.405 170.236 105.505 170.272 98.4395C170.279 97.243 170.225 95.953 170.177 94.667C170.128 93.3624 170.085 92.0327 170.103 90.6738C170.138 87.9561 170.418 85.2071 171.349 82.5596C173.153 77.4255 177.59 72.1537 188.995 68.6064Z"
            />
          </svg>
        )}
      </div>

      <div className={styles.memberInfo}>
        <h4 className={styles.memberInfoName} id={id}>
          {name}
        </h4>

        {email && (
          <a className={styles.memberInfoContact} href={`mailto:${email}`}>
            {email}
          </a>
        )}

        {visibleArticles.length > 0 ? (
          <div>
            <h5 className={styles.articlesListTitle}>Список статей автора:</h5>
            <ul className={styles.memberArticles}>
              {visibleArticles.map((article, index) => (
                <li key={index}>
                  <Link to={article.link} className={styles.articleLink}>
                    <span dangerouslySetInnerHTML={{ __html: article.title }} />
                  </Link>
                </li>
              ))}
            </ul>

            {hiddenArticles.length > 0 && (
              <details className={styles.detailsWrapper}>
                <summary
                  className={styles.moreArticles}
                  style={{ color: colorVar }}
                >
                  <span className={styles.showText}>[показать все статьи]</span>
                  <span className={styles.hideText}>[скрыть]</span>
                </summary>
                <ul className={styles.memberArticles}>
                  {hiddenArticles.map((article, index) => (
                    <li key={index}>
                      <Link to={article.link} className={styles.articleLink}>
                        <span
                          dangerouslySetInnerHTML={{ __html: article.title }}
                        />
                      </Link>
                    </li>
                  ))}
                </ul>
              </details>
            )}
          </div>
        ) : (
          <p className={styles.tasks}>{tasks}</p>
        )}
      </div>
    </div>
  );
};
